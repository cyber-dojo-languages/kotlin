# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# DO NOT EDIT THIS FILE. IT IS AUTO_GENERATED
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
FROM amazoncorretto:8-alpine3.18-jdk

# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# START of extra commands to fulfil runner's requirements (os=Alpine)
RUN (getent group sandbox) || (addgroup -g 51966 sandbox)
RUN (grep -q sandbox:x:41966 /etc/passwd) || (adduser -D -g "" -h /home/sandbox -G sandbox -s /bin/bash -u 41966 sandbox)
RUN apk add --update coreutils bash tar file
ARG GIT_COMMIT_SHA
ENV SHA=${GIT_COMMIT_SHA}
# END of extra commands to fulfil runner's requirements
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

LABEL maintainer=jon@jaggersoft.com

ENV KOTLIN_VERSION=1.9.22 \
    KOTLIN_HOME=/usr/share/kotlin

RUN mkdir "${KOTLIN_HOME}"
WORKDIR ${KOTLIN_HOME}

RUN apk add --update bash \
  && apk add --virtual=build-dependencies wget ca-certificates \
  && wget "https://github.com/JetBrains/kotlin/releases/download/v${KOTLIN_VERSION}/kotlin-compiler-${KOTLIN_VERSION}.zip" \
  && unzip "kotlin-compiler-${KOTLIN_VERSION}.zip" \
  && rm "kotlin-compiler-${KOTLIN_VERSION}.zip" \
  && apk del build-dependencies \
  && rm -rf /tmp/* /var/cache/apk/*

ENV PATH=${PATH}:${KOTLIN_HOME}/kotlinc/bin
